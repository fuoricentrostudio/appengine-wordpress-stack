application: your-project-id
version: gaestack
runtime: php
api_version: 1

handlers:
- url: /(.*\.(htm|html|css|js))$
  static_files: web/wp/\1
  upload: web/wp/.*\.(htm|html|css|js)$
  application_readable: true

- url: /wp-content/(.*\.(ico|jpg|jpeg|png|gif|woff|ttf|otf|eot|svg))$
  static_files: web/wp/wp-content/\1
  upload: web/wp/wp-content/.*\.(ico|jpg|jpeg|png|gif|woff|ttf|otf|eot|svg)$
  application_readable: true

- url: /(.*\.(ico|jpg|jpeg|png|gif|woff|ttf|otf|eot|svg))$
  static_files: web/wp/\1
  upload: web/wp/.*\.(ico|jpg|jpeg|png|gif|woff|ttf|otf|eot|svg)$
  application_readable: true

- url: /wp-includes/images/media/(.*\.(ico|jpg|jpeg|png|gif|woff|ttf|otf|eot|svg))$
  static_files: web/wp/wp-includes/images/media/\1
  upload: web/wp/wp-includes/images/media/.*\.(ico|jpg|jpeg|png|gif|woff|ttf|otf|eot|svg)$
  application_readable: true

- url: /wp-admin/(.+)
  script: web/wp/wp-admin/\1
  secure: always

- url: /wp-admin/
  script: web/wp/wp-admin/index.php
  secure: always

- url: /wp-login.php
  script: web/wp/wp-login.php
  secure: always

- url: /wp-cron.php
  script: web/wp/wp-cron.php
  login: admin

- url: /xmlrpc.php
  script: web/wp/xmlrpc.php

- url: /wp-(.+).php
  script: web/wp/wp-\1.php

- url: /(.+)?/?
  script: web/wp/index.php

env_variables:
  DB_NAME: ':/cloudsql/your-project-id:wordpress'
  DB_USER: 'root'
  DB_PASSWORD: ''
  DB_HOST: 'wordpress_db'
  AUTH_KEY: 'put your unique phrase here'
  SECURE_AUTH_KEY: 'put your unique phrase here'
  LOGGED_IN_KEY: 'put your unique phrase here'
  NONCE_KEY: 'put your unique phrase here'
  AUTH_SALT: 'put your unique phrase here'
  SECURE_AUTH_SALT: 'put your unique phrase here'
  LOGGED_IN_SALT: 'put your unique phrase here'
  NONCE_SALT: 'put your unique phrase here'  

skip_files:
- ^(.*/)?\..*$
- ^(.*/)?\.md$
